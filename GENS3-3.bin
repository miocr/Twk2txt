*H æzpusobi, ze retezec s se bere jako zahlavi a vytiskne se za ¨kazdym prikazem (*E). *H vytvori automaticky i *E. ¬*S æzastavi listovani na ¥tomto ¥radku. ¥Pokracovani ¥nasleduje ¨stisknutim libovolneho tlacitka. Uzitecne pro ¥cteni ¥adres ¨ve stredni casti vypisu. Poznamka: *S je ¥vyhodnocen ¥i ¥po ¨*L-, *S nezastavi vypis na tiskarne. º*L- åzastavi listovani i tisk, pocinaje timto radkem. ®*L+ åobnovi listovani i tisk, pocinaje timto radkem. ¯*D+ åzpusobi, ze hodnota citace adres je ¥uvedena ¥dekadicky ¥na ¨zacatku kazdeho radku. Vhodne pro uzivatele SPECTRA. ª*D- åvrati se k pouziti hexadecimalnich cisel. µ*C- åzkrati radek as¥embleru pocinaje ¥nasledujicim ¥radkem. ¥Ke ¨zkraceni dojde vypustenim vypisu strojniho ¥kodu, ¥cimz ¥se ¨usetri 9 ¥znaku ¥a ¥tim ¥se ¥radek ¥vejde ¥na ¥jeden ¥radek ¨obrazovky (32 znaku) a zvysi se citelnost. ´*C+ åvrati se na uplny radek jak je popsan v kapitole 2.0. ©*F (filename) ÛJe to velice vykon¥y prikaz, ktery dovoluje nacist z ¥pasky ¨blok textu do vyrovnavaci pameti a pote provest kompilaci z ¨vyrovnavaci pameti; to umoznuje vytvaret rozsahle ¥programy ¨ve strojnim ¥kodu ¥nebot ¥prekladany ¥text ¥nezabira ¥mnoho ¨pameti. ÜJmeno textu (az 10 znaku), ¥ktery ¥chcete ¥vlozit ¥v ¥tomto ¨miste kompilace muze byt urcen po '*F' a musi ¥byt ¥od¥elen ¨mezerou. Neni-li uvedeno jmeno, pak se ¥vlozi ¥prvni ¥text, ¨ktery bude na pasce nalezen. ÇJakykoliv text, ktery chcete vkladat timto ¥zpusobem, ¥musi ¨byt predem ulozen na pasku prikazem editoru 'T' ¥a ¥nikoliv ¨'P' - toto je nezbytne, nebot text pro ¥vkladani ¥musi ¥byt ¨ulozen v blocich s ¥dostatecnym ¥vnitroblokovym ¥prostorem, ¨ktery umozni preklad bloku pred vlozenim ¥dalsiho ¥bloku ¥z ¨pasky. Velikost bloku pouzita timto ¥prikazem ¥(a ¥prikazem ¨editoru T) je ¥dana ¥na ¥zacatku, ¥pri ¥vstupu ¥do ¥GENS ¥3 ¨vlozenim odpovedi na 'Buf¥er size?' viz kapitola 1. Vlozene ¨cislo (0 - 9) je vzato ¥jako ¥velikost ¥vkladaci ¥pameti ¥v ¨jednotkach po 256 bytech se standardni hodnotou 4*256 bytu. ¨Moznost ¥volit ¥velikost §pameti §optimalizuje §pomer ¨velikost/rychlost ¥pri ¥vkladani ¥textu ¥z ¥pasky; §napr. ¨nepredpokladate-li pouziti prikazu 'F', ¥je ¥vhodne ¥zvolit ¨velikost pameti ¥0 ¥a ¥tak ¥minimalizovat ¥prostor ¥zabrany ¨GENS 3. ÜVsimnete si, ze velikost pameti specifikovana v ¥dobe, ¥kdy ¨tvorite soubor pro vlozeni musi byt ¥stejna ¥jako ¥velikost ¨pameti dana v dobe kdy skutecne chcete text vkladat. ¯Kdykoliv as¥embler vyhodnoti prikaz 'F' ¥objevi ¥se ¥'Start ¨the tape.¦', to se stane pri prvnim i pri druhem ¥prubehu, ¨nebot vkladany text musi byt cten pri ¥obou ¥prubezich. ¥Na ¨pasce je vyhledan pozadovany soubor pro vlozeni nebo ¥prvni ¨soubor. Je-li ¥nalezen ¥soubor ¥pro ¥vlozeni, ¥jehoz ¥jmeno ¨nesouhlasi ¥s ¥pozadovanym, ¥zobrazi ¥se ¦zprava §'Found ¨filename' a hledani ¥pokracuje, ¥jinak ¥se ¥zobrazi ¥'Using ¨filename' a soubor se nahraje a vlozi. ½Viz ¥priloha ¥3, ¥kde ¥je ¥uveden ¥priklad ¥pouziti ¥tohoto ¨prikazu. ÛJine prikazy as¥embleru nez *F jsou ¥rozpoznany ¥pouze ¥pri ¨druhem prubehu. ÔJe-li §kompilace §vypnuta §jednou §z §podminenych ¨pseudoinstrukci, je vypnut i vliv vsech prikazu as¥embleru. ÿÈKAPITOLA 3 ¥EDITOR ÿ¶3.1 Uvod do editoru ÓVsechny verze editoru GENS 3 jsou jednoduche radkove ¥editorypracujici se vsemi systemy se ¥Z80, ¥s ¥jednoduchou ¥obsluhou ¥aschopne rychleho a efektivniho vkladani programu. µZa ucelem zmenseni velikosti textoveho souboru provadi editorpotlaceni urciteho poctu mezer. ¥Je ¥to ¥provadeno ¥nasledujicimzpusobem: po napsani radky z klavesnice je tato vlozena znak ¥poznaku do vnitrni ¥vyrovnavaci ¥pameti ¥as¥embleru; ¥po ¥ukonceniradku (tj. po stisknuti ENTER) ¥dojde ¥k ¥presunu ¥do ¥textovehosouboru. Behem tohoto ¥presunu ¥jsou ¥potlaceny ¥urcite ¥mezery:radek je vyhodnocovan od prvnio znaku; jde-li o mezeru, ¥nahradise ¥znakem ¥pro ¥tabelaci ¥a ¥vsechny ¥nasledujici ¥mezery §sevynechaji. Neni-li prvnim znakem mezera, pak se znaky ¥presunujido textoveho souboru dokud neni objevena mezera a pak se provadistejna cin¥ost, jakoby mezera byla na prvnim miste. Toto se daleopakuje, takze znaky tabelace jsou umisteny ¥na ¥zacatek ¥radku,mezi navesti a mnemoniku, mezi mnemoniku ¥a ¥operandy, ¥pripadnemezi operandy a komentar. ¥Jakmile ¥je ¥vyhodnocen ¥navrat ¥vozu(ENTER) ukonci se presun a program se vrati do editoru. ¯Uzivatel muze jednoduse pouzit znaky pro tabelaci (CI ¥- ¥viznize) ¥k ¥vytvoreni ¥tabelovaneho ¥textoveho ¦souboru, §kteryse soucasne usporne vklada do pameti. ÁVsimnete si, ze mezery se nepotlacuji v ¥komentari ¥a ¥nemajibyt uvnitr navesti, pole mnemoniky a operandu. ¸V ¥prubehu ¥teto ¥kapitoly ¥se ¥pouzivaji ¥urcite ¥zkratky ¥koznaceni prislusnych ridicich kodu: ÀENTER §ENTER na SPECTRU ÊC¥ ªCAPS SHIFT a 1. Pro preruseni vstupu. µCM ªDELETE nebo CAPS ¥SHIFT ¥a ¥0. ¥Posun ¥kurzoru ¥zpet ¥s ¬vymazanim znaku. ÊCI ªCAPS SHIFT a 8. Posun na dalsi tabelacni pozici. ªCX ªCAPS SHIFT a 5. Vymazani vkladaneho radku. ³Pri spusteni GENS 3 ¥se ¥automaticky ¥vstoupi ¥do ¥editoru ¥azobrazi se zprava: ÑCopyright Hisoft 1983 ÎAl¥ rights reserved ÿµnasledovana kurzorem editoru '>'. ÅZa ¥kurzorem ¥muzete ¥vlozit ¥prikazovy ¥radek ¥nasledujicihoformatu: äC N1,N2,S1,S2 ENTER ÿ¬C ¦je prikaz k provedeni (viz kapitola 3.2 nize) ²N1 ¥je cislo 1 - 32767 vcetne ÆN2 ¥je cislo 1 - 32767 vcetne ÆS1 ¥je retezec znaku delky max. 20 ÁS2 ¥je retezec znaku delky max. 20 ÿ©Carka je pouzita k od¥eleni jednotlivych argumentu ¥(muze ¥setake zmenit - viz prikaz 'S') a mezery se ¥ignoruji ¥s ¥vyjimkouretezcu. Zadny z ¥prikazu ¥neni ¥povin¥y, ¥ale ¥nektere ¥prikazy(mapr. 'D') se neprovedou bez urceni N1 a N2. Editor si pamatujevlozena cisla a retezce a ¥v ¥pripade, ¥ze ¥je ¥nektera ¥hodnotavynechana, pak se bere pro N1 a N2 hodnota ¥10 ¥a ¥retezce ¥jsouprazdne. V pripade vlozeni neplatneho prikazu jako F-1,10¥,HEL¥Oje tento prikaz ignorovan a zobrazi se ¥zprava ¥'Pardon?' ¥- ¥jetreba radek ¥prepsat ¥spravne ¥tj. ¥F1,10¥,HEL¥O. ¥Tato ¥chybovazprava se objevi rovnez v pripade, ze ¥retezec ¥S2 ¥prekroci ¥20znaku; pri prekroceni delky u S1 se dalsi znaky ignoruji. ­Prikazy se mohou vkladat velkymi nebo malymi pismeny. ®Pri vkladani ¥prikazoveho ¥radku ¥mohou ¥byt ¥pouzity ¥ridicifunkce popsane vyse jako: CX k ¥vymazani ¥zacatku ¥radku, ¥CI ¥kposunuti kurzoru na nasledujici tabelacni pozici a pod. ¯Nasledujici kapitola popisuje podrobne prikazy ¥editoru ¥- ¥vpripade, ze argument prikazu je vlozen do symbolu '<>', ¥pak ¥jenutne jej pouzit. ÿ·3.2 Prikazy editoru Ð3.2.1 Vkladani textu ÒText muze byt vlozen do textoveho souboru bud napsanim ¥cislaradku, mezery a pozadovaneho ¥textu ¥nebo ¥uzitim ¥prikazu ¥'I'.Vsimnete si, ze napisete-li cislo radku nasledovane ¥ENTER ¥(beztextu) pak je tento radek vymazan, pokud existuje. Pri ¥vkladanitextu lze pouzit ridici funkce CX, CI a C¥. DELETE (CH) ¥zpusobiposun kurzoru zpet (nikoliv vsak ¥na ¥zacatku ¥radku). ¥Text ¥sevklada do vnitrni pameti GENS 3 a ¥je-li ¥tato ¥pamet ¥plna, ¥jevkladani dalsich znaku blokovano - musite pouzit CH ¥nebo ¥CX ¥kuvolneni pameti. ÖKdyz editor zjisti, ze se behem vkladani konec textu blizi ¥kRamtop, pak se zobrazi zprava 'Bad memory!'. Znamena to, ze nenimozne vkladat dalsi text a vlozeny textovy soubor ¥nebo ¥alesponjeho cast se musi ulozit na pasku pro pozdejsi pouziti. ìPrikaz: I n,m ÖTento prikaz umoznuje automaticke vkladani: n - je cislo prvnihovkladaneho radku a m - je ¥odstup ¥mezi ¥cisly ¥radku. ¥Text ¥sevklada po zobrazeni cisla radku, lze podle potreby pouzit ¥ruzneridici kody a text se ukonci ENTER. K ukonceni ¥cin¥osti ¥uzijteridici funkci C¥. ÕVlozite-li radek s cislem, ktere jiz v textu existuje, pak jestary radek ¥vymazan ¥a ¥nahrazen ¥novym ¥pri ¥stisknuti ¥ENTER.Jestlize pri automatickem cislovani radku dosahne ¥hodnota ¥vicenez 32767 pak se vkladani ukonci. ÅJestlize pri psani textu dosahnete konce radku ¥na ¥obrazovceaniz jste napsali 64 znaku (velikost ¥radkove ¥pameti), ¥pak ¥seobraz posune o radek a ¥muzete ¥pokracovat ¥na ¥dalsim ¥radku ¥-automaticky se oznaci v textu, ze toto cislo radku ¥je ¥od¥eleneod textu. ÿ¿3.2.2 Listovani textu ÑText muzeme prohlizet ¥pomoci ¥prikazu ¥'L'; ¥pocet ¥soucasnezobrazenych radku pri tomto prikazu je stanoven na zacatku, ¥alemuze byt zmenen prikazem 'K'. ÿ«Prikaz: L n,m ÖZobrazi text na obrazovce od radku ¥n ¥do ¥radku ¥m. ¥Standardnihodnota pro n je vzdy 1 a pro m je 32767 tj. standardni ¥hodnotaje nezavisla na drive uzitych ¥argumentech. ¥K ¥listovani ¥celymtextovym souborem jednoduse pouzijte ¥'L' ¥bez ¥argumentu. ¥Levyokraj obrazovky je usporadan tak, ze je zrejme cislovani ¥radku.Tabelace radku se provadi automaticky ¥a ¥jednotliva ¥pole ¥jsouod¥elena. Pocet zobrazenych radku muze ¥byt ¥regulovan ¥prikazem'K' - po zobrazeni prislusneho poctu radku se listovani ¥zastavi(pokud nebylo dosazeno radku m). Ridici funkci ¥C¥ ¥lze ¥provestnavrat do editoru nebo stisknutim ¥libovolneho ¥jineho ¥tlacitkapokracuje listovani. ÿ´Prikaz: K n Ø'K' nastavi pocet radku ¥k ¥zobrazeni ¥pri ¥listovani ¥jak ¥bylopopsano vyse u 'L'. Je vypocitana hodnota (n MOD 256) a ulozena.Uzitim K5 pri naslednem 'L' se zobrazi 5 radku soucasne. ë3.2.3 Uprava textu ÔPo vytvoreni ¥urciteho ¥textu ¥muze ¥nastat ¥potreba ¥vlozenidalsich radku. Ruzne prikazy umozni zmenu, vypusteni, ¥presun ¥aprecislovani radku: ÿµPrikaz: D<n,m> ¥(DELETE) ËVsechny radky od n do m budou vypusteny ze ¥souboru. ¥Je-li ¥m<n¥ebo je pouzito mene nez ¥2 argumentu, prikaz se ¥neprovede; ¥topomuze zabranit chybam z nepozornosti. Jeden radek lze ¥vypustitpri m=n; tehoz lze dosahnout napsanim ¥cisla ¥radku ¥nasledovaneENTER. ÿÂPrikaz: M n,m ¦(MOVE) ÍPremisti text z radku n na radek ¥m, ¥kde ¥nahradi ¥stary ¥text,pokud tam je. Radek n se zrusi. Tento ¥prikaz ¥umozni ¥presunoutradek textu na jinou pozici v ¥ramci ¥textoveho ¥souboru. ¥Pokudradek s cislem n ne¥xistuje, prikaz se neprovede. òPrikaz: N<n,m> ÕPrecisluje textovy soubor s prvnim radkem n a cislovani ¥dalsichradku ma krok m. Musi byt uvedeno n i ¥m ¥a ¥v ¥pripade, ¥ze ¥bycislovani prekrocilo hodnotu 32767, zustane puvodni cislovani. åPrikaz: F n,m,f,s ¥(FIND) ÊHleda v rozmezi radku n<x<m vyskyt retezce f. Je-li nalezen, pakse prislusny radek zobrazi a vstoupi se do ¥rezimu ¥Edit ¥- ¥viznize. Nyni ¥lze ¥pouzit ¥prikazu ¥editoru ¥k ¥vyhledani ¥dalsichvyskytu hledaneho retezce f v udanem ¥rozmezi ¥nebo ¥jej ¥muzemenahradit retezcem s. Podrobnosti viz nize. ¹Uvedomte si, ze rozmezi radku i oba retezce mohou byt definovanyjiz drive jinym prikazem a pak staci stisknout 'F' pro vyhledani- k vysvetleni viz priklad v kapitole 3.3. ùPrikaz: E n ¥(EDIT) ÐUmozni upravu radku s cislem n. Pokud n ¥ne¥xistuje, ¥prikaz ¥seneprovede; jinak ¥se ¥radek ¥prepise ¥do ¥vyrovnavaci ¥pameti ¥azobrazi (s cislem radku), cislo radku se ¥zobrazi ¥jeste ¥jednouna nasledujicim radku ¥obrazovky ¥a ¥lze ¥provadet ¥upravy ¥nebozmeny. Vsechny dalsi zmeny se provadeji ve vyrovnavaci pameti ¥anikoliv v samotnem ¥textu; ¥lze ¥tedy ¥kdykoli ¥obnovit ¥puvodniobsah. ÝPri teto cin¥osti se zobrazi ukazatel, ktery se ¥pohybuje ¥podelradku (od prvniho znaku) a je ¥mozne ¥pouzit ¥ruznych ¥pomocnychprikazu pro upravy nebo zmeny v radku. Pomocne prikazy jsou: ç' ' (mezera) - ¥posune ¥ukazatel ¥o ¥jedno ¥misto ¥vpred. ¥Nelze §krokovat pres konec radku. ÅCH ¥(DELETE) ¥- ¥posune ¥ukazatel ¥o ¥jedno ¥misto ¥zpet. ¥Nelze §krokovat pres zacatek radku. ÃCI ¥(ridici funkce) - posune ukazatel na ¥nasledujici ¥tabelacni §pozici. ØENTER - konec upravy (vsechny zmeny provedeny) µQ ¦(QUIT) - prerusi upravu a ignoruje provedene zmeny v radku. R ¦(RELOAD) - obnovi obsah vyrovnavaci pameti ¥podle ¥puvodniho §obsahu textoveho souboru (vraceni na puvodni tvar). ¬L ¦(LIST) - vypise zbytek radku, ktery je upravovan tj. ¥zbytek §radku za pozici ukazatele. Druh cin¥osti zustava zachovan ¥s §ukazatelem na zacatku radku. ÃK ¦(KIL¥) - vypusti znak na pozici ukazatele. µZ ¦- vypusti vsechny znaky od ¥zacatku ¥radku ¥az ¥k ¥ukazateli §vcetne. ØF ¦(FIND) - ¥hleda ¥dalsi ¥vyskyt ¥retezce ¥drive ¥definovaneho §prikazovym radkem ¥(viz ¥prikaz ¥'F' ¥vyse). ¥Tento ¥pomocny §prikaz ¥automaticky ¥ukonci ¥upravu ¥daneho ¥radku ¥(zachova §zmeny) nenalezne-li ¥dalsi ¥vyskyt ¥pozadovaneho ¥retezce ¥v §tomto ¥radku. ¥Vyskytne-li ¥se ¥retezec ¥v ¥radcich, ¦ktere §nasleduji (v predem stanovenem rozmezi) prejde se ¥k ¥uprave §toho radku, kde byl retezec znovu nalezen. Vsimnete ¥si, ¥ze §ukazatel se nastavi vzdy na pocatek nalezeneho retezce. ¨S ¦(SUBSTITUTE) ¥- ¥nahradi ¥predem ¥definovanym ¥retezcem ¥'s' §nalezeny retezec 'f' a provede prikaz 'F' tj. vyhleda nasle-