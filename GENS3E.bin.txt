                         * G E N S 3 E *                        
         Full screen editor pro Hisoft assembler GENS3M         
                  (C) J. Lama— - LECSOFT 4/1986                 
                                                                
     Tento  editor  byl  naps\n jako dopln•k k assembleru  GENS3
firmy Hisoft. Nechci se nijak dot|kat  jmenovan   firmy,  ale  v
z\jmu objektivity  je  t•eba  konstatovat,  •e  i  kdy•  vlastn+
p•eklada— je nejlep•+, jak| na ZX-Spectrum existuje, s  editorem
GENSu je to pon•kud slab•+. S editorem, kter| se V\m  dostal  do
rukou, se d\ ps\t program podstatn• pohodln•ji a rychleji.      
     Z rozmanit|ch verz+ GENSu,  kter   mezi  spektra•i  koluj+,
byla pro realizaci zvolena verze  GENS3M,  nebo~t  podle  n\zoru
autora je v n+ nejm n• chyb.                                    
     Editor je p•ipojen ke GENSu napevno, —+m• vznikl  jednolit|
blok. V•echny funkce GENSu v•ak p•itom z•staly zachov\ny. Jedin|
rozd+l je ve v|stupn+m form\tu na obrazovku,  kter|  je  upraven
pro pou•it+ rutiny pro print  s  form\tem  42  znak•  na  •\dce.
     Editor, stejn• jako GENS, je  pln•  relokovateln|  po  cel 
pam•ti. M••eme tedy program pou•+vat  v  pam•ti  na  libovoln|ch
adres\ch.                                                       
     T m•• v•echny •+d+c+ kl\vesy editoru jsou zvoleny s ohledem
na pou•+v\n+ kl\vesnice "pluska". Gumov+  spektristi  holt  maj+
sm•lu anebo se uma—kaj+ (hodn• jsou pot•eba shifty).            
     Editor je v programu um+st•n pod GENSem,  kter|  nad  sebou
vytv\•+ vlastn+ programov| buffer. Reloka—n+ tabulka editoru  je
po spu•t•n+ p•eps\na obrazovkov|m bufferem editoru. Pam•~t  tedy
z•stane maxim\ln• vyu•ita.                                      
     Po vstupu do editoru a jeho zrelokov\n+  je  posl ze  mo•n|
skok do BASICu, odkud lze  se  vr\tit  zp•t  do  editoru,  a  to
stejnou adresou jako p•i prvn+m startu. P•i tomto vstupu z•stane
zachov\n i napsan| text (tepl|  start).  Pozor  -  nelze  pou•+t
adres pro studen| a tepl| start GENSu (start +  56,  resp.  61).
Editor mimoto v•bec nem\ studen| start.                         
     Pro p•+padn  sl+dily lze tuto informaci doplnit t+m, •e  je
tak  mo•no spustit samotn| GENS3M, kter| je j\drem  programu,  a
jeho prvn+ start je na po—\te—n+ adrese editoru + 4786 (tepl|  a
studen| start GENSu pak spo—teme norm\ln•).  Vlastn+  GENS3M  se
svou reloka—n+ tabulkou je dlouh| 9046  bajt•,  jak  je  ka•d mu
jist• zn\mo.                                                    
                                                                
     Spu•t•n+ programu:                                         
                                                                
     Po p•+slu•n m CLEARu, nahr\n+ programu  (LOAD  "GENS3E"CODE
na zvolenou adresu, GENS3E je dlouh| 13832  bajt•)  a  pat•i—n m
RANDOMIZE USR adresa se objev+ ot\zka "Colours & keyboard  click
setting y/n". P•i stisknut+ kl\vesy "Y" se  provede  n\sleduj+c+
/prava  v  syst mov|ch  prom•nn|ch:  (23609):=20,   (23561):=20,
(23562):=3, (23624):=71, (23693):=71.  Jinak  se  provede  prvn+
start GENSu s obvyklou ot\zkou "Buffer size" atd.               
     P•i  pou•it+  GENSov ho  p•+kazu  "B"  (Basic)  se  provede
spu•t•n+ editoru. Pozn\me to podle blikaj+c+ho kurzoru  v  lev m
horn+m  rohu  obrazovky.  Nyn+  m••eme  pou•+vat  t•chto  funkc+
editoru:                                                        
                                                                
     ~R\dkov| editor:                                           
                                                                
     Ka•d| •\dek zobrazen| na obrazovce je i programov|m •\dkem.
Nahrajeme-li do editoru program s del•+mi  •\dky,  ne•  je  t•ch
zm+n•n|ch 42,  jsou  p•ebyte—n   znaky  ignorov\ny.  Pro  pohyby
kurzoru jsou ur—eny norm\ln+  kl\vesy  (•ipky).  Znaky  psan   z
kl\vesnice se do ji• napsan ho vpisuj+, s pat•i—n|m rozhrnov\n+m
napsan ho textu. Jako tabul\tor slou•+  mezera,  editor  si  s\m
rozm+st+ slova na  spr\vn   pozice.  Za—+n\-li  •\dek  n\v••t+m,
za—+n\me ps\t hned  od  kraje.  Jinak  vynech\me  alespo+  jednu
mezeru.                                                         
     Pouh|m psan+m  textu  po  obrazovce  se  vlastn+  z\pis  do
programu ned•je, nastane a• p•i stisku kl\vesy  "ENTER".  Editor
pak tento •\dek znovu  vyp+•e,  a  to  tak,  •e  ji•  respektuje
um+st•n+ slov na jejich spr\vn  pozice. To je  velice  u•ite—n ,
proto•e to jednak zrychluje —innost editoru, jednak p•i n\hodn m
stisknut+ kl\vesy v m+st• ji• napsan ho programu  nemus+me  text
opravovat, nebo stiskneme "EXTEND EXTEND" (viz d\le).           
                                                                
     V|znam kl\ves v •\dkov m m|du:                             
                                                                
DELETE     ... smaz\n+ znaku p•ed kurzorem,                     
GRAPH      ... smaz\n+ znaku pod kurzorem,                      
EDIT       ... smaz\n+ textu od kurzoru do konce •\dku,         
CAPS       ... zm•na mal|ch p+smen na velk  a naopak,           
TRUE VIDEO ... p•echod na n\sleduj+c+ str\nku,                  
INV VIDEO  ... p•echod na p•edch\zej+c+ str\nku,                
ENTER      ... z\pis •\dku do pam•ti,                           
EXTEND     ... •+d+c+ a blokov  p•+kazy,                        
                                                                
krom• toho je pozm•n•n i v|znam n•kter|ch dal•+ch kl\ves,  nap•.
SS (Symbol Shift) + "Y" nap+•e znak "[", nebo SS + "I"  je  znak
"" apod.                                                       
                                                                
     ~R+d+c+ a blokov  p•+kazy (EXTEND):                        
                                                                
Q          ... smaz\n+   •\dku    (s    p•em+st•n+m  kurzoru  na
               za—\tek •\dku). Neprob•hne z\pis smazan ho  •\dku
               do pam•ti, operace se t|k\ jen screen bufferu    
I          ... zapnut+/vypnut+ insertovac+ho m|du,              
DELETE     ... vypu•t•n+ •\dku,                                 
GRAPH      ... rozhrnut+ •\dk• pro veps\n+ nov ho •\dku         
               doprost•ed ji• napsan ho textu,                  
TRUE VIDEO ... p•echod na posledn+ str\nku programu,            
INV VIDEO  ... p•echod na prvn+ str\nku programu,               
G          ... skok do editoru GENSu,                           
X          ... skok na studen| start GENSu (clear),             
Y          ... n\vrat do BASICu,                                
B          ... ozna—en+ za—\tku nebo konce bloku (editor si  s\m
               pozn\, co je co),                                
D          ... vypu•t•n+ bloku ji• nadefinovan ho p•+kazy "B",  
M          ... p•esun bloku na m+sto ur—en+,                    
C          ... zkop+rov\n+ bloku.                               
                                                                
     Jestli•e p•i  blokov   operaci  dojde  k  p•epln•n+  pam•ti
(Ramtop uva•ovan| editorem je 65535), vyp+•e se hl\•ka  "Out  of
memory !". P•i nesmysln m po•adavku (nap•. chceme-li  zkop+rovat
blok doprost•ed toho  sam ho  bloku)  se  editor  ozve  "Invalid
request  !".  Po  vyps\n+  hl\•ky  b••+  —asov\  smy—ka  (cca  2
sekundy), jej+• b•h lze p•ed—asn• ukon—it stiskem n•—eho.       
     Krom• toho  je  t•eba  •+ci  n•kolik  slov  k  funkci  "B".
Ozna—en+ bloku se toti• ned•je zaps\n+m zna—ky do programu,  jak
je to obvykl  (proto tak  nen+ ozna—en+  bloku    vid•t),    ale
provede se tak, •e je do pam•ti ulo•eno po•ad+ •\dku od  po—\tku
textu. Nen+ tud+• radno  ozna—it  pomoc+  "B"  blok,  pak  n•kde
vlo•it resp. vypustit  n•jak   •\dky  a  pot   prov st  blokovou
operaci.                                                        
                                                                
     Dal•+ p•+kazy:                                             
                                                                
R          ... nadefinov\n+ stringu pro pozd•j•+ z\m•nu,        
N          ... hled\n+ stringu ji• nadefinovan ho p•+kazem "F", 
F          ... hled\n+ stringu:                                 
                                                                
     String je hled\n od •\dky s  kurzorem  do  konce  programu.
Je-li nalezen, vylistuje se program od •\dku s t+mto stringem  a
na spodn+m •\dku se vyp+•e "Command :".                         
                                                                
     Nyn+ m••eme stisknout:                                     
                                                                
     F ... hled\n+ n\sleduj+c+ho stringu,                       
     S ... z\m•na stringu za string z p•+kazu "R",              
     cokoli jin ho zp•sob+ n\vrat do hlavn+ edita—n+ smy—ky.    
                                                                
     P•+kaz "F" (a "N") umo•+uje tak  hledat cel| p•+kaz  (nap•.
"LD   A,B") a to tak, •e mnemoniku od operand• odd•l+me kl\vesou
"kurzor  doprava"  (•ipka).  Zad\me-li  v  p•+kazu  "F"   symbol
n\sledovan| zm+n•nou kl\vesou, nalezne se tento symbol pouze  na
m+st•, kde je pou•it jako n\v••t+ apod.                         
     Jestli•e se string v  dan   oblasti  programu  nevyskytuje,
editor vyp+•e hl\•ku "String absent !".                         
                                                                
     Jak\koli v|•e neuveden\ kl\vesa  stisknut\  v  EXTEND  m|du
zp•sob+ skok do hlavn+ edita—n+ smy—ky se sou—asn|m vylistov\n+m
str\nky, kter\ byla na obrazovce p•ed stisknut+m "EXTEND".  Toho
je mo•no vyu•+t v p•+pad• chyby nebo nespr\vn•  napsan ho  •\dku
(pokud je•t• nebyl •\dek odesl\n kl\vesou ENTER).  Na  obrazovce
se toti• objev+ str\nka textu z programov ho  bufferu,  tj.  bez
posledn+ch proveden|ch zm•n.                                    
                                                                
     V GENSu jsou krom• toho d\le pozm•n•ny rutiny  pro  SAVE  a
LOAD (resp. jsou vol\ny do editoru), tak•e b•hem SAVE nebo  LOAD
nedojde k ne•\douc+mu n\vratu do BASICu  v  p•+pad•  BREAKu,  je
pouze vyps\na hl\•ka "Interrupted" a provede se skok do  editoru
GENSu. GENS tak  nehl\s+ chybu, je-li p•i LOADu nalezen  blok  s
nespr\vn|m jm nem nebo jin|m flag bajtem  (jak  ten  bajt  jinak
nazvat ?).                                                      
     Posledn+ pozn\mka se t|k\ jen printiv|ch spektr\k•. Bedliv+
spektern+ci  —touc+  pozorn•  tento  manu\l  se  ji•    nesm+rn•
podivuj+, pro— ten dement Lama—ovskej nechal  u  GENSu  je•t•  i
p•vodn+ editor. Je to pr\v• kv•li tisk\rn• nebo —emusi takov mu,
co  sna•iv+  spektr\ln+ci  pou•+vaj+.  Kdy•  si  ov•em   zkus+te
vyprintit kus programu, budete p•l hodiny hled•t, co to  z  toho
kr\mu vlastn•  leze.  Proto  p•edes+l\m  d•+ve  ne•  se  zlostn+
spektrouni vra•edn• vrhnou na svou nebohou  tisk\rnu,  •e  chyba
NEN+I v  tisk\rn•.  Takov|m  rad•ji  porad+m,  aby  p•ed  tiskem
provedli "POKE start editoru +4837,0: POKE start +6511,0". Kdyby
tam snad potom n•kdo cht•l strkat to, co tam bylo p•vodn•,  m••e
tam pouknout t•eba 37 a 6, kdy• nevymysl+ nic lep•+ho.          
     Podrobn•j•+ informace o tomto  pilov m  software  je  mo•no
z+skat p•+mo u toho •~tourala, co  si  mysl+,  •e  jak•tak•  um+
assembler:                                                      
                                  Ji•+ Lama— ml.                
                                  P•edbo•sk\ 8                  
                          182 00  Praha 8                       
                                  tel. 842424                   
                                                                
     P•edem d•kuji za ozn\men  chyby v editoru, na  kter   mo•n\
zu•iv+ edit\to•i p•ijdou. O •\dn m programu nelze prohl\sit,  •e
je to posledn+ verze.